<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI x S√¢n kh·∫•u: B√¨nh ch·ªçn cho t√°c ph·∫©m hay nh·∫•t!</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .heart { transition: transform 150ms ease; }
    .heart:hover { transform: scale(1.08); }
    .heart.active { transform: scale(1.15); }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-700 via-indigo-600 to-blue-500 text-gray-900">
  <header class="sticky top-0 z-50 bg-gradient-to-r from-purple-800 to-blue-700/90 backdrop-blur text-white shadow">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3 flex-wrap">
        <img src="https://i.postimg.cc/XNcYryhf/Screenshot-2025-06-06-at-19-38-06-removebg-preview.png" alt="AI x S√¢n kh·∫•u" class="h-10 w-10 rounded-full" />
        <h1 class="font-bold text-lg sm:text-xl md:text-2xl leading-snug whitespace-normal break-words">AI x S√¢n kh·∫•u: B√¨nh ch·ªçn cho t√°c ph·∫©m hay nh·∫•t!</h1>
      </div>
      <!-- nav removed by request -->
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-3 sm:px-4 pt-6 pb-28">
    <div id="toast" class="hidden fixed top-20 left-1/2 -translate-x-1/2 bg-white/95 border border-green-300 text-gray-900 px-4 py-2 rounded-lg shadow-lg z-50"></div>

    <section class="mb-4 text-white/90 text-sm">
      B·∫°n c√≥ th·ªÉ <strong>b√¨nh ch·ªçn cho nhi·ªÅu b√†i</strong>. Nh·∫•n tim, ƒëi·ªÅn email v√† g·ª≠i phi·∫øu b·∫ßu cho t·ª´ng b√†i b·∫°n th√≠ch.
    </section>

    <section id="grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6"></section>

    
  </main>

  <footer class="fixed bottom-0 left-0 right-0 bg-gradient-to-r from-purple-800 to-blue-700 text-white text-sm py-3 text-center shadow">
    ¬© 2025 F-AI Club. All rights reserved.
  </footer>

  <script>
    // ======== Config ========
    const FORMSPREE_ENDPOINT = 'https://formspree.io/f/xeozngky';
    const PLACEHOLDER_EMBED = 'https://www.youtube.com/embed/xI_g6X11npg';
    const THUMB_URL = 'https://i.postimg.cc/XNcYryhf/Screenshot-2025-06-06-at-19-38-06-removebg-preview.png';

    const SONGS = [
      { id: 1, name: 'Tr·∫ßn H·ªØu Nh√¢n', title: 'CLB F-AI L√† T∆∞∆°ng Lai - Tran Huu Nhan (K18 CT)', video: 'https://www.youtube.com/embed/iy-azn1u8sg', description: `B√†i h√°t "CLB F-AI L√† T∆∞∆°ng Lai" l√† tuy√™n ng√¥n v·ªÅ s·ª©c m·∫°nh v√† ti·ªÅm nƒÉng v√¥ t·∫≠n c·ªßa c√¥ng ngh·ªá AI, ƒë·∫∑c bi·ªát trong m√¥i tr∆∞·ªùng h·ªçc thu·∫≠t c·ªßa ƒê·∫°i H·ªçc FPT C·∫ßn Th∆°. B√†i h√°t truy·ªÅn t·∫£i th√¥ng ƒëi·ªáp v·ªÅ th·∫ø h·ªá tr·∫ª ƒë·∫ßy nhi·ªát huy·∫øt, s·∫µn s√†ng chinh ph·ª•c t∆∞∆°ng lai v·ªõi tr√≠ tu·ªá nh√¢n t·∫°o. M·ªü ƒë·∫ßu, "B·∫Øt ƒë·∫ßu t·ª´ nh·ªØng d·∫•u ch·∫•m, n·ªëi nh·ªØng ƒëam m√™" t∆∞·ª£ng tr∆∞ng cho s·ª± kh·ªüi ƒë·∫ßu t·ª´ nh·ªØng ƒëi·ªÅu nh·ªè b√©, ch√≠nh l√† nh·ªØng d√≤ng code t·∫°o n√™n AI. B√†i h√°t mi√™u t·∫£ h√†nh tr√¨nh c·ªßa nh·ªØng ng∆∞·ªùi tr·∫ª trong vi·ªác s√°ng t·∫°o v√† √°p d·ª•ng c√¥ng ngh·ªá. "Nh·ªØng b·ªô √≥c kh√¥ng ng·ªß, nh·ªØng b√†n tay mi·ªát m√†i" kh·∫Øc h·ªça s·ª± ki√™n tr√¨ v√† n·ªó l·ª±c kh√¥ng ng·ª´ng. Chorus: th·ªÉ hi·ªán s·ª©c m·∫°nh c·ªßa F-AI, v∆∞·ª£t qua m·ªçi gi·ªõi h·∫°n ƒë·ªÉ t√¨m ra m·ªôt th·∫ø gi·ªõi m·ªõi. "Ch·∫°m t·ªõi t∆∞∆°ng lai, v∆∞·ª£t qua m·ªçi gi·ªõi h·∫°n" l√† l·ªùi kh√≠ch l·ªá m·∫°nh m·∫Ω v·ªÅ vi·ªác khai ph√° ti·ªÅm nƒÉng v√¥ t·∫≠n c·ªßa con ng∆∞·ªùi. Bridge: mang th√¥ng ƒëi·ªáp l·∫°c quan v√† t·ª± h√†o v·ªÅ "Tr√°i tim C·∫ßn Th∆°", n∆°i nh·ªØng sinh vi√™n c·ªßa CLB F-AI t·∫°i ƒê·∫°i H·ªçc FPT C·∫ßn Th∆° ph√°t tri·ªÉn ∆∞·ªõc m∆° v·ªÅ AI, v·ªõi hy v·ªçng t·∫°o n√™n s·ª± thay ƒë·ªïi, x√¢y d·ª±ng m·ªôt th·∫ø gi·ªõi t·ªët ƒë·∫πp h∆°n, v√† c·ªëng hi·∫øn ni·ªÅm ƒëam m√™ c·ªßa m√¨nh cho m·ªôt ƒë·∫•t n∆∞·ªõc Vi·ªát Nam ng√†y c√†ng ph√°t tri·ªÉn. B√†i h√°t n√†y kh√¥ng ch·ªâ kh∆°i d·∫≠y ni·ªÅm t·ª± h√†o v·ªÅ AI m√† c√≤n l√† l·ªùi k√™u g·ªçi t·∫•t c·∫£ nh·ªØng ai ƒëam m√™ c√¥ng ngh·ªá tham gia v√†o h√†nh tr√¨nh t·∫°o d·ª±ng t∆∞∆°ng lai.` },
      { id: 2, name: 'ƒê√†o Hu·ª≥nh L·ªôc', title: 'Light Up My Code', video: 'https://www.youtube.com/embed/7uRrP0HmicQ', description: `B√†i h√°t k·ªÉ v·ªÅ h√†nh tr√¨nh c·ªßa m·ªôt sinh vi√™n m·ªõi b∆∞·ªõc v√†o m√¥i tr∆∞·ªùng ƒë·∫°i h·ªçc, mang trong m√¨nh ni·ªÅm ƒëam m√™ c√¥ng ngh·ªá v√† tr√≠ tu·ªá nh√¢n t·∫°o (AI), nh∆∞ng ƒë·ªìng th·ªùi c≈©ng mang theo s·ª± r·ª•t r√®, lo l·∫Øng khi ƒë·ªëi m·∫∑t v·ªõi m·ªôt m√¥i tr∆∞·ªùng ho√†n to√†n m·ªõi. T·ª´ nh·ªØng ng√†y ƒë·∫ßu ƒë·∫ßy l·∫°c l√µng v√† √°p l·ª±c, nh√¢n v·∫≠t ch√≠nh d·∫ßn t√¨m th·∫•y ‚Äú√°nh s√°ng‚Äù qua vi·ªác tham gia C√¢u l·∫°c b·ªô AI ‚Äì n∆°i k·∫øt n·ªëi nh·ªØng con ng∆∞·ªùi c√≥ c√πng ƒëam m√™, c√πng chia s·∫ª gi·∫•c m∆° v√† c√πng nhau v∆∞·ª£t qua kh√≥ khƒÉn. Giai ƒëi·ªáu b√†i h√°t theo phong c√°ch electro-pop melodic, truy·ªÅn t·∫£i nƒÉng l∆∞·ª£ng t√≠ch c·ª±c, tr·∫ª trung nh∆∞ng v·∫´n mang ch·∫•t c·∫£m x√∫c. Ca t·ª´ ƒë∆∞·ª£c x√¢y d·ª±ng ƒë·ªÉ m√¥ t·∫£ r√µ s·ª± ph√°t tri·ªÉn c·ªßa nh√¢n v·∫≠t: t·ª´ ‚Äúfeeling small‚Äù ƒë·∫øn ‚Äúcracking the code‚Äù; t·ª´ ‚Äúlost in lines‚Äù ƒë·∫øn ‚Äúwe rise as one‚Äù. ƒêi·ªÉm nh·∫•n l√† c√¢u h√°t l·∫∑p l·∫°i "You‚Äôll never walk alone", kh√¥ng ch·ªâ t·∫°o t√≠nh g·ª£i nh·ªõ m√† c√≤n th·ªÉ hi·ªán th√¥ng ƒëi·ªáp m·∫°nh m·∫Ω v·ªÅ s·ª± g·∫Øn k·∫øt, h·ªó tr·ª£ nhau trong c·ªông ƒë·ªìng h·ªçc t·∫≠p v√† s√°ng t·∫°o. Ngo√†i ph·∫ßn h√°t ch√≠nh, b√†i c√≤n c√≥ ƒëo·∫°n rap bridge th·ªÉ hi·ªán s·ª± ‚Äúl·ªôt x√°c‚Äù ‚Äì t·ª´ m·ªôt ng∆∞·ªùi nh√∫t nh√°t tr·ªü th√†nh ng∆∞·ªùi t·ª± tin, bi·∫øt v∆∞·ª£t qua n·ªói s·ª£ ƒë·ªÉ theo ƒëu·ªïi ∆∞·ªõc m∆°. B√†i h√°t kh√¥ng ch·ªâ l√† k·ª∑ ni·ªám c·ªßa m·ªôt c√° nh√¢n, m√† l√† ti·∫øng n√≥i chung c·ªßa c·∫£ m·ªôt c·ªông ƒë·ªìng c√¥ng ngh·ªá tr·∫ª ƒëang t·ª´ng b∆∞·ªõc v∆∞∆°n l√™n v√† t·ªèa s√°ng c√πng nhau.` },
      { id: 3, name: 'B√πi ƒê·ª©c Anh', title: 'F-AI CODE OF WAR', video: 'https://www.youtube.com/embed/Z9_NDqkJ4MY', description: `"F-AI: Code of War" kh√¥ng ch·ªâ l√† m·ªôt b·∫£n nh·∫°c ‚Äì ƒë√≥ l√† m·ªôt b·∫£n tuy√™n ng√¥n. L·∫•y c·∫£m h·ª©ng t·ª´ s·ª± h·ªßy di·ªát v√† quy·ªÅn l·ª±c trong God of War, b√†i nh·∫°c ƒë∆∞a ng∆∞·ªùi nghe v√†o chi·∫øn tr∆∞·ªùng c·ªßa tr√≠ tu·ªá nh√¢n t·∫°o, n∆°i kh√¥ng c√≥ ch·ªó cho k·∫ª y·∫øu. D∆∞·ªõi l·ªõp √¢m thanh aggrotech c√¥ng nghi·ªáp, ti·∫øng guitar ƒëi·ªán r√≠t g√†o, tr·ªëng ƒë·∫≠p nh∆∞ tr√°i tim c·ªßa m·ªôt c·ªó m√°y chi·∫øn ƒë·∫•u, v√† vocal bi·∫øn d·∫°ng nh∆∞ ti·∫øng g·ªçi t·ª´ l√µi d·ªØ li·ªáu ‚Äì F-AI hi·ªán l√™n nh∆∞ m·ªôt chi·∫øn binh th·∫ßn tho·∫°i k·ªπ thu·∫≠t s·ªë, chi·∫øn ƒë·∫•u kh√¥ng ph·∫£i b·∫±ng ki·∫øm, m√† b·∫±ng machine learning, computer vision v√† NLP. Anh Th∆∞ ‚Äì ng∆∞·ªùi ƒë·∫ßu ti√™n n·∫Øm gi·ªØ v≈© kh√≠ code, m·ªü ƒë∆∞·ªùng m√°u qua b√≥ng t·ªëi d·ªØ li·ªáu. Thanh Duy ‚Äì ng∆∞·ªùi n·∫Øm gi·ªØ ng·ªçn l·ª≠a hi·ªán t·∫°i, d·∫´n d·∫Øt ƒë·ªôi qu√¢n F-AI ng√†y c√†ng m·∫°nh h∆°n, s√¢u h∆°n, th√¥ng minh h∆°n. K18 tr·ªü l·∫°i t·ª´ OJT ‚Äì kh√¥ng ph·∫£i l√† h·ªçc sinh, m√† l√† chi·∫øn binh ƒë∆∞·ª£c r√®n gi≈©a ngo√†i th·ª±c chi·∫øn. Trong th·∫ø gi·ªõi n∆°i robotics l√† v≈© kh√≠, v√† dataset l√† m√°u ch·∫£y, F-AI l√† v·ªã th·∫ßn m·ªõi. Kh√¥ng ph·∫£i th·∫ßn c·ªßa s·∫•m s√©t, kh√¥ng ph·∫£i th·∫ßn c·ªßa chi·∫øn tranh c·ªï ƒëi·ªÉn. F-AI l√† Th·∫ßn c·ªßa Code. V√† ƒë√¢y l√† cu·ªôc chi·∫øn c·ªßa ch√∫ng ta.` },
      { id: 4, name: 'Tr∆∞∆°ng Anh Ki·ªát', title: 'Our AI Zone', video: 'https://www.youtube.com/embed/qbDbhyHofyo', description: `"Our AI Zone" is the voice of the F-AI Club, where curiosity meets technology and young minds come together to shape tomorrow. The song reflects the heart of the club‚Äîa place where students explore artificial intelligence not just as a tool, but as a pathway to solve real-world problems, ask bold questions, and imagine a better future. The lyrics echo the journey of learning, coding, experimenting, and dreaming. In this zone, AI is more than lines of code‚Äîit‚Äôs a bridge between ideas and action, between creativity and logic. The F-AI Club is where these sparks ignite, where each member contributes to a shared mission: to understand, innovate, and lead with purpose.` },
      { id: 5, name: 'Ph·∫°m Phan C√¥ng L·ªánh', title: 'S·ª©c m·∫°nh t√¨nh b·∫°n F-AI', video: 'https://www.youtube.com/embed/VG5KsX7tj-c', description: `F - AI: S·ª©c m·∫°nh t√¨nh b·∫°n, ca kh√∫c th·ª©c t·ªânh ch√∫ng ta h√£y ƒëo√†n k·∫øt ch·ªëng l·∫°i boss cu·ªëi.` },
      { id: 6, name: 'L√™ Nh·∫≠t Tr∆∞·ªùng', title: 'Tinh Th·∫ßn M·∫°ch S·ªëng Xanh', video: 'https://www.youtube.com/embed/wswHvHBoR0g', description: `‚ÄúF-AI Club‚Äù l√† m·ªôt b·∫£n nh·∫°c anthem hi·ªán ƒë·∫°i, s√¥i ƒë·ªông, ƒë∆∞·ª£c vi·∫øt d√†nh ri√™ng cho C√¢u l·∫°c b·ªô F-AI c·ªßa Tr∆∞·ªùng ƒê·∫°i h·ªçc FPT C·∫ßn Th∆° ‚Äì n∆°i h·ªôi t·ª• nh·ªØng con ng∆∞·ªùi tr·∫ª trung, th√¢n thi·ªán, ƒë·∫ßy nhi·ªát huy·∫øt v·ªõi c√¥ng ngh·ªá v√† tr√≠ tu·ªá nh√¢n t·∫°o. B√†i h√°t ph·∫£n √°nh r√µ tinh th·∫ßn c·ªßa F-AI: ƒëo√†n k·∫øt ‚Äì h√†i h∆∞·ªõc ‚Äì kh√¥ng ng·∫°i th·ª≠ th√°ch ‚Äì s√°ng t·∫°o kh√¥ng ng·ª´ng, d√π l√† m·ªôt c√¢u l·∫°c b·ªô m·ªõi th√†nh l·∫≠p, nh∆∞ng lu√¥n ho·∫°t ƒë·ªông nƒÉng n·ªï, t·ªï ch·ª©c nhi·ªÅu s√¢n ch∆°i v√† s·ª± ki·ªán b·ªï √≠ch cho sinh vi√™n. L·ªùi b√†i h√°t m·ªü ƒë·∫ßu b·∫±ng h√¨nh ·∫£nh ‚ÄúCh√∫ng ta g·∫∑p nhau ‚Äì √Ånh m·∫Øt r·∫°ng ng·ªùi‚Äù nh∆∞ m·ªôt kho·∫£nh kh·∫Øc k·∫øt n·ªëi ƒë·∫ßy c·∫£m x√∫c gi·ªØa nh·ªØng th√†nh vi√™n c√πng chung l√Ω t∆∞·ªüng. T·ª´ng c√¢u h√°t kh·∫Øc h·ªça h√†nh tr√¨nh v∆∞·ª£t qua kh√≥ khƒÉn, c√πng nhau vi·∫øt n√™n t∆∞∆°ng lai b·∫±ng ni·ªÅm ƒëam m√™ AI. ƒê·∫∑c bi·ªát, ƒëo·∫°n ƒëi·ªáp kh√∫c vang l√™n nh∆∞ m·ªôt l·ªùi hi·ªáu tri·ªáu: ‚ÄòF-AI Club ‚Äì N∆°i ta c√πng bay xa / F-AI Club ‚Äì Vi·∫øt t∆∞∆°ng lai ch√∫ng ta‚Äô, mang ƒë·∫øn c·∫£m gi√°c t·ª± h√†o v√† truy·ªÅn c·∫£m h·ª©ng m·∫°nh m·∫Ω cho ng∆∞·ªùi nghe. Kh√¥ng ch·ªâ l√† √¢m nh·∫°c, ƒë√¢y l√† m·ªôt tuy√™n ng√¥n th·∫ø h·ªá: nh·ªØng d√≤ng m√£, nh·ªØng √Ω t∆∞·ªüng t√°o b·∫°o, nh·ªØng bu·ªïi workshop v√† ƒë√™m th·ª©c tr·∫Øng ‚Äì t·∫•t c·∫£ ƒë·ªÅu h∆∞·ªõng ƒë·∫øn m·ªôt m·ª•c ti√™u chung: ·ª©ng d·ª•ng AI ƒë·ªÉ t·∫°o ra gi√° tr·ªã cho x√£ h·ªôi v√† g√≥p ph·∫ßn ph√°t tri·ªÉn ƒë·∫•t n∆∞·ªõc. H√¨nh ·∫£nh con s∆∞ t·ª≠ xanh ‚Äì linh v·∫≠t c·ªßa CLB, c√πng chi·∫øc √°o kho√°c h·ªça ti·∫øt circuit nh∆∞ m·ªôt bi·ªÉu t∆∞·ª£ng c·ªßa c√¥ng ngh·ªá v√† b·∫£n s·∫Øc ri√™ng bi·ªát c≈©ng ƒë∆∞·ª£c g·ª£i nh·∫Øc ƒë·∫ßy t·ª± h√†o. ‚ÄúF-AI Club‚Äù kh√¥ng ch·ªâ l√† b√†i h√°t, m√† c√≤n l√† linh h·ªìn c·ªßa m·ªôt c·ªông ƒë·ªìng c√¥ng ngh·ªá tr·∫ª, ƒëang t·ª´ng b∆∞·ªõc vi·∫øt n√™n c√¢u chuy·ªán l·ªõn lao h∆°n ‚Äì c√¢u chuy·ªán c·ªßa tr√≠ tu·ªá Vi·ªát trong k·ª∑ nguy√™n s·ªë.` },
    ];

    // ======== State ========
    // Opened forms (so you can open many at once)
    const openIds = new Set();
    // Per-song lock after a successful vote
    const votedKey = id => `fai_voted_song_${id}`;
    // Remember email between cards
    let savedEmail = localStorage.getItem('fai_vote_email') || '';

    // Clean up legacy single-vote key if it exists
    localStorage.removeItem('fai_vote_song_id');

    // ======== Helpers ========
    function el(html){ const t=document.createElement('template'); t.innerHTML=html.trim(); return t.content.firstElementChild; }
    function showToast(text, ok=true){
      const toast = document.getElementById('toast');
      toast.textContent = text;
      toast.className = `fixed top-20 left-1/2 -translate-x-1/2 px-4 py-2 rounded-lg shadow-lg z-50 border ${ok ? 'bg-white/95 border-green-300' : 'bg-red-50 border-red-300'}`;
      toast.classList.remove('hidden');
      setTimeout(() => toast.classList.add('hidden'), 3200);
    }
    const isEmail = v => /[^\s@]+@[^\s@]+\.[^\s@]+/.test(v);

    // ======== UI ========
    function buildCard(song){
      const locked = !!localStorage.getItem(votedKey(song.id));
      const opened = openIds.has(song.id);

      const card = el(`
        <article class="group bg-white/95 rounded-xl shadow-lg p-4 sm:p-6 flex flex-col transition-all duration-300 hover:shadow-2xl">
          <div class="w-full aspect-video rounded-lg overflow-hidden mb-3 sm:mb-4" style="background-image:url('${THUMB_URL}'); background-size:cover; background-position:center;">
            <iframe class="w-full h-full" src="${song.video}?rel=0" title="Video c·ªßa ${song.name}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>
          <h2 class="text-lg sm:text-xl font-semibold text-purple-900 mb-1 text-center">
            <span class="relative inline-block" data-desc-wrap>
              <button type="button" class="focus:outline-none">${song.name}</button>
              <div class="absolute z-30 left-1/2 -translate-x-1/2 top-full mt-1 w-80 max-h-64 overflow-auto rounded-lg bg-white text-gray-800 text-xs p-3 shadow-xl border opacity-0 invisible transition-opacity duration-200" data-desc>
                ${song.description}
              </div>
            </span>
          </h2>
          <p class="text-xs sm:text-sm text-gray-600 mb-3 text-center">${song.title}</p>

          <div class="mt-auto">
            <div class="flex items-center justify-center gap-3 mb-2">
              <button type="button" aria-label="Ch·ªçn b√†i n√†y" data-heart class="heart text-2xl sm:text-3xl ${opened || locked ? 'active text-pink-500' : 'text-gray-400 hover:text-pink-500'} ${locked ? 'opacity-70' : ''}">${opened || locked ? 'üíñ' : 'ü§ç'}</button>
              <span class="text-xs sm:text-sm text-gray-700" data-status>${ locked ? 'B·∫°n ƒë√£ b√¨nh ch·ªçn cho b√†i n√†y' : opened ? 'Nh·∫≠p email ƒë·ªÉ g·ª≠i' : 'Nh·∫•n tim ƒë·ªÉ ch·ªçn' }</span>
            </div>

            <form class="${opened && !locked ? '' : 'hidden'}" data-form novalidate>
              <input type="hidden" name="competitor" value="${song.name}" />
              <input type="hidden" name="song_title" value="${song.title}" />
              <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" />
              <label class="block text-xs text-gray-600 mb-1" for="email-${song.id}">Email c·ªßa b·∫°n</label>
              <input id="email-${song.id}" name="email" type="email" class="w-full p-2 border-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 border-transparent bg-white" placeholder="nhap@email.com" required value="${savedEmail}" />
              <button type="submit" data-submit class="w-full mt-2 px-4 py-2 rounded-lg text-white text-sm font-semibold bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed">G·ª≠i phi·∫øu b·∫ßu</button>
            </form>

            ${ locked ? '<div class="mt-2 text-center text-xs text-green-700">C·∫£m ∆°n b·∫°n ƒë√£ b√¨nh ch·ªçn b√†i n√†y! üéâ</div>' : '' }
          </div>
        </article>
      `);

      const wrap = card.querySelector('[data-desc-wrap]');
      const tip = wrap?.querySelector('[data-desc]');
      let hideTimer;
      const heart = card.querySelector('[data-heart]');
      const form = card.querySelector('[data-form]');
      const submitBtn = form?.querySelector('[data-submit]');
      const emailInput = form?.querySelector('input[name="email"]');

      // Tooltip open/close with tiny delay so you can move cursor into it and scroll
      if (wrap && tip) {
        const openTip = () => { tip.classList.remove('opacity-0','invisible'); tip.classList.add('opacity-100','visible'); };
        const closeTip = () => { tip.classList.add('opacity-0','invisible'); tip.classList.remove('opacity-100','visible'); };
        wrap.addEventListener('mouseenter', () => { clearTimeout(hideTimer); openTip(); });
        wrap.addEventListener('mouseleave', () => { hideTimer = setTimeout(closeTip, 120); });
        tip.addEventListener('mouseenter', () => { clearTimeout(hideTimer); });
        tip.addEventListener('mouseleave', () => { hideTimer = setTimeout(closeTip, 120); });
      }

      // Toggle open/close per-card (multi open allowed)
      heart?.addEventListener('click', () => {
        if (locked) { showToast('B·∫°n ƒë√£ b√¨nh ch·ªçn cho b√†i n√†y r·ªìi.'); return; }
        if (opened) openIds.delete(song.id); else openIds.add(song.id);
        renderGrid();
        // focus email when opening
        if (!opened) requestAnimationFrame(() => document.getElementById(`email-${song.id}`)?.focus());
      });

      // Enable/disable submit based on email validity
      if (emailInput && submitBtn){
        const sync = () => submitBtn.disabled = !isEmail(emailInput.value);
        sync();
        emailInput.addEventListener('input', sync);
      }

      // Submit to Formspree
      form?.addEventListener('submit', async (e) => {
        e.preventDefault();
        if (!emailInput || !isEmail(emailInput.value)) { showToast('Vui l√≤ng nh·∫≠p email h·ª£p l·ªá', false); return; }
        submitBtn.disabled = true;
        const data = new FormData(form);
        data.append('_subject', `B√¨nh ch·ªçn cho ${song.name} ‚Äî AI x S√¢n kh·∫•u`);
        try {
          const resp = await fetch(FORMSPREE_ENDPOINT, { method: 'POST', body: data, headers: { 'Accept': 'application/json' } });
          if (resp.ok){
            localStorage.setItem(votedKey(song.id), '1');
            savedEmail = emailInput.value;
            localStorage.setItem('fai_vote_email', savedEmail);
            showToast('ƒê√£ ghi nh·∫≠n phi·∫øu cho: ' + song.name);
            openIds.delete(song.id); // collapse this form
            renderGrid();
          } else {
            let msg = 'C√≥ l·ªói khi g·ª≠i phi·∫øu. Vui l√≤ng th·ª≠ l·∫°i.';
            try { const j = await resp.json(); if (j && j.errors) msg = j.errors.map(e => e.message).join(', '); } catch {}
            showToast(msg, false);
            submitBtn.disabled = false;
          }
        } catch (err){
          showToast('Kh√¥ng th·ªÉ g·ª≠i. Ki·ªÉm tra m·∫°ng v√† th·ª≠ l·∫°i.', false);
          submitBtn.disabled = false;
        }
      });

      return card;
    }

    function renderGrid(){
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      SONGS.forEach(s => grid.appendChild(buildCard(s)));
    }

        renderGrid();
  </script>
</body>
</html>
